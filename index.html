<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <!-- ========== Fonts ============== -->
  <link rel="stylesheet" href="">
  <!-- ========== CSS ============== -->
  <link rel="stylesheet" href="assets/css/materialize.min.css">
  <link rel="stylesheet" href="assets/css/estils.css">
  <!-- ========== Icons ============== -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


</head>

<body>

  <!-- BUSCAR USUARIO -->

  <div class="row">

    <form class="col s12">
      <div class="row">
        <div class="input-field col s5">
          <input id="input-text-user" type="text" class="">
          <label for="text">Login</label>

        </div>
        <!--<div class="input-field col s5">
          <input id="password" type="password" class="validate">
          <label for="password">Password</label>
          </div>-->
        <div class="input-field col s2">
          <button type="button" class="waves-effect waves-light btn boton1" id="btn-submit" onclick="">Log In</button>
        </div>
      </div>
    </form>
  </div>
  <!-- BUSCAR USUARIO -->
  <p id="user" class="grey-text text-darken-3" style="font-size: 20px; margin-left:15px "> <p>
  <div class="row">
    <div class="col s12 m3">
      <div class="card grey lighten-2">
        <div class="card-content white-text">
          <div class="input-field  s12">
            <input id="myInput" onkeyup="filtrar()" type="text" class="">
            <label for="text">Filtrar</label>

          </div>
          <div class="card-action">
            <ul id="myUl">
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="col s12 m9">
      <div class="card white-grey darken-1">
        <div class="card-content white-text">
          <div class="input-field  s12" style="height:385px;">

          </div>
          <div class="card-action">
            <div class="input-field  s9">
              <input id="enviartxt" onkeyup="enviartxt()" type="text" class="">
              <label for="text">Mensaje</label>

            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ========== JavaScript ============== -->
  <script type="text/javascript" src="assets/js/materialize.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/js/main.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      var iduser = '';
      $.ajax({
        url: "api_chat/public/getAllUsers",
        type: "GET",
        error: function() {
          alert("Hi ha agut un Error");
        },
        success: function(response) {
          var nom = "";
          $.each(response.result, function(i, item) {
            nom += "<li>";
            nom += "<a id=" + item.id + ">" + item.name;
          });
          $("#myUl").html(nom);
        }
      });
      $("#btn-submit").click(function() {
        var iduser = "";
        var username = $("#input-text-user").val();
        $("#user").html("Bienvenido: " + username);

        $.ajax({
          url: "api_chat/public/getId/" + username,
          type: "GET",
          error: function() {
            alert("Hi ha agut un Error");
          },
          success: function(response) {
            iduser = response.result;
          }
        }).done(function(result) {
          alert("DONE!!");
        }).error(function(result) {
          alert("ERROR!!");
        });
      });
    });
  </script>
</body>

</html>
